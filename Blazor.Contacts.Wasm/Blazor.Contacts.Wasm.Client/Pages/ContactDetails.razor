@page "/contactdetails"
@page "/contactdetails/{id}"

@using Blazor.Contacts.Wasm.Shared

@inject IContactService ContactService
@inject NavigationManager NavigationManager

@if(contact == null)
{
    <p>Loading...</p>
}
else{

    <EditForm Model="contact" OnValidSubmit="Save">
        <div class="card">
            <h5 class="card-header">Contact Details </h5>
            <div class="container">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="">First Name</label>
                        <InputText class="form-control" @bind-Value="@contact.FirstName"></InputText>
                        <label for="">Lasr Name</label>
                        <InputText class="form-control" @bind-Value="@contact.LastName"></InputText>
                        <label for="">Phone</label>
                        <InputText class="form-control" @bind-Value="@contact.Phone"></InputText>
                        <label for="">Address</label>
                        <InputText class="form-control" @bind-Value="@contact.Address"></InputText>
                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <input class="btn btn-success" type="submit" value="Save Contact">
                            <input class="btn btn-danger" type="button" value="Cancel">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </EditForm>
}



@code{
    public Contact contact;

        protected async override Task OnInitializedAsync()
        {
            contact = new Contact();
        }

        protected async Task Save()
        {
            await ContactService.SaveContact(contact);
            NavigationManager.NavigateTo("./contactlist");
        }
}